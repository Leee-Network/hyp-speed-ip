name: Build
on:
  workflow_dispatch:
jobs:
  Build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    - name: Clean
      uses: Mattraks/delete-workflow-runs@v2.0.3
      with:
        retain_days: 0
        keep_minimum_runs: 3
    - name: Install
      env:
        ID: ${{ secrets.ID }}
      run: |
        curl -s https://install.zerotier.com | sudo bash
        zerotier-cli join ${{ secrets.ID }}
        wget https://github.com/Leee-Network/hyp-speed-ip/releases/download/3.0-rc.5/ZBBuild-linux-amd64-v3
        chmod +x ZBBuild-linux-amd64-v3
    - name: Build
      run: |
        ./ZBBuild-linux-amd64-v3
